/**
 * skylark-fluxslider - A version of fluxslider that ported to running on skylarkjs ui.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-fluxslider/
 * @license MIT
 */
define(["skylark-jquery","./flux"],function(i,t){i.fn.css3=function(i){var t={},s=["webkit","moz","ms","o"];for(var n in i){for(var e=0;e<s.length;e++)t["-"+s[e]+"-"+n]=i[n];t[n]=i[n]}return this.css(t),this},i.fn.transitionEnd=function(t){for(var s=["webkitTransitionEnd","transitionend","oTransitionEnd"],n=0;n<s.length;n++)this.bind(s[n],function(n){for(var e=0;e<s.length;e++)i(this).unbind(s[e]);t&&t.call(this,n)});return this},t.transition=function(s,n){if(this.options=i.extend({requires3d:!1,after:function(){}},n),this.slider=s,this.options.requires3d&&!t.browser.supports3d||!t.browser.supportsTransitions||!0===this.options.fallback){var e=this;this.options.after=void 0,this.options.setup=function(){e.fallbackSetup()},this.options.execute=function(){e.fallbackExecute()}}},t.transition.prototype={constructor:t.transition,hasFinished:!1,run:function(){var i=this;void 0!==this.options.setup&&this.options.setup.call(this),this.slider.image1.css({"background-image":"none"}),this.slider.imageContainer.css("overflow",this.options.requires3d?"visible":"hidden"),setTimeout(function(){void 0!==i.options.execute&&i.options.execute.call(i)},5)},finished:function(){this.hasFinished||(this.hasFinished=!0,this.options.after&&this.options.after.call(this),this.slider.imageContainer.css("overflow","hidden"),this.slider.setupImages(),this.slider.element.trigger("fluxTransitionEnd",{currentImage:this.slider.getImage(this.slider.currentImageIndex)}))},fallbackSetup:function(){},fallbackExecute:function(){this.finished()}},t.transitions={},t.transition_grid=function(s,n){return new t.transition(s,i.extend({columns:6,rows:6,forceSquare:!1,setup:function(){var t=this.slider.image1.width(),s=this.slider.image1.height(),n=Math.floor(t/this.options.columns),e=Math.floor(s/this.options.rows);this.options.forceSquare&&(e=n,this.options.rows=Math.floor(s/e));for(var o=t-this.options.columns*n,r=Math.ceil(o/this.options.columns),a=s-this.options.rows*e,h=Math.ceil(a/this.options.rows),l=(this.slider.image1.height(),0),d=0,c=document.createDocumentFragment(),u=0;u<this.options.columns;u++){var f=n;d=0;if(o>0)f+=g=o>=r?r:o,o-=g;for(var p=0;p<this.options.rows;p++){var g,m=e,v=a;if(v>0)m+=g=v>=h?h:v,v-=g;var w=i('<div class="tile tile-'+u+"-"+p+'"></div>').css({width:f+"px",height:m+"px",position:"absolute",top:d+"px",left:l+"px"});this.options.renderTile.call(this,w,u,p,f,m,l,d),c.appendChild(w.get(0)),d+=m}l+=f}this.slider.image1.get(0).appendChild(c)},execute:function(){var i=this,s=this.slider.image1.height(),n=this.slider.image1.find("div.barcontainer");this.slider.image2.hide(),n.last().transitionEnd(function(t){i.slider.image2.show(),i.finished()}),n.css3({transform:t.browser.rotateX(-90)+" "+t.browser.translate(0,s/2,s/2)})},renderTile:function(i,t,s,n,e,o,r){}},n))}});
//# sourceMappingURL=sourcemaps/flux.transitions.js.map
