{"version":3,"sources":["flux.transitions.explode.js"],"names":["define","$","flux","transitions","explode","fluxslider","opts","transition_grid","extend","columns","forceSquare","delayBetweenBars","perspective","requires3d","renderTile","elem","colIndex","rowIndex","colWidth","rowHeight","leftOffset","topOffset","delay","Math","floor","random","this","options","css","background-image","slider","image1","background-position","css3","transition-duration","transition-timing-function","transition-property","transition-delay","undefined","maxDelay","maxDelayTile","execute","perspective-origin","-moz-transform","-moz-perspective","-moz-transform-style","_this","blocks","find","transitionEnd","transform-style","finished","setTimeout","each","index","block","opacity","transform","browser","translate","round"],"mappings":";;;;;;;AAAAA,QACC,iBACA,SACA,sBACC,SAASC,EAAEC,GACZA,EAAKC,YAAYC,QAAU,SAASC,EAAYC,GAC/C,OAAO,IAAIJ,EAAKK,gBAAgBF,EAAYJ,EAAEO,QAC7CC,QAAS,EACTC,aAAa,EACbC,iBAAkB,GAClBC,YAAa,IACbC,YAAY,EACZC,WAAY,SAASC,EAAMC,EAAUC,EAAUC,EAAUC,EAAWC,EAAYC,GAC/E,IAAIC,EAAQC,KAAKC,MAAoB,GAAdD,KAAKE,SAAYC,KAAKC,QAAQhB,kBAErDV,EAAEc,GAAMa,KACPC,mBAAoBH,KAAKI,OAAOC,OAAOH,IAAI,oBAC3CI,sBAAuB,IAAIZ,EAAW,OAAOC,EAAU,OACrDY,MACFC,sBAAuB,QACvBC,6BAA8B,UAC9BC,sBAAuB,MACvBC,mBAAoBf,EAAM,YAINgB,IAAlBZ,KAAKa,WACPb,KAAKa,SAAW,GAEdjB,EAAQI,KAAKa,WAEfb,KAAKa,SAAWjB,EAChBI,KAAKc,aAAezB,IAGtB0B,QAAS,WACRf,KAAKI,OAAOC,OAAOE,MAClBrB,YAAec,KAAKC,QAAQf,YAC5B8B,qBAAsB,YACpBd,KACFe,iBAAkB,eAAejB,KAAKC,QAAQf,YAAY,MAC1DgC,mBAAoB,OACpBC,uBAAwB,gBAGzB,IAAIC,EAAQpB,KAERqB,EAASrB,KAAKI,OAAOC,OAAOiB,KAAK,YAGrCtB,KAAKc,aAAaS,cAAc,WAC/BH,EAAMhB,OAAOC,OAAOE,MACnBiB,kBAAmB,SAEpBJ,EAAMK,aAGPC,WAAW,WACVL,EAAOM,KAAK,SAASC,EAAOC,GAC3BtD,EAAEsD,GAAO3B,KACR4B,QAAW,MACTvB,MACFwB,UAAavD,EAAKwD,QAAQC,UAAU,EAAG,EAAG,KAAO,cAAcpC,KAAKqC,MAAoB,EAAdrC,KAAKE,UAAY,GAAG,MAAMF,KAAKqC,MAAoB,EAAdrC,KAAKE,UAAY,GAAG,MAAMF,KAAKqC,MAAoB,EAAdrC,KAAKE,UAAY,GAAG,iBAGxK,MAEFnB","file":"../flux.transitions.explode.js","sourcesContent":["define([\n\t\"skylark-jquery\",\n\t\"./flux\",\n\t\"./flux.transitions\"\n],function($,flux) {\n\tflux.transitions.explode = function(fluxslider, opts) {\n\t\treturn new flux.transition_grid(fluxslider, $.extend({\n\t\t\tcolumns: 6,\n\t\t\tforceSquare: true,\n\t\t\tdelayBetweenBars: 30,\n\t\t\tperspective: 800,\n\t\t\trequires3d: true,\n\t\t\trenderTile: function(elem, colIndex, rowIndex, colWidth, rowHeight, leftOffset, topOffset) {\n\t\t\t\tvar delay = Math.floor(Math.random()*10*this.options.delayBetweenBars);\n\t\t\t\t\n\t\t\t\t$(elem).css({\n\t\t\t\t\t'background-image': this.slider.image1.css('background-image'),\n\t\t\t\t\t'background-position': '-'+leftOffset+'px -'+topOffset+'px'\n\t\t\t\t}).css3({\n\t\t\t\t\t'transition-duration': '500ms',\n\t\t\t\t\t'transition-timing-function': 'ease-in',\n\t\t\t\t\t'transition-property': 'all',\n\t\t\t\t\t'transition-delay': delay+'ms'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// Keep track of the last elem to fire\n\t\t\t\tif(this.maxDelay === undefined)\n\t\t\t\t\tthis.maxDelay = 0;\n\t\t\t\t\t\n\t\t\t\tif(delay > this.maxDelay)\n\t\t\t\t{\n\t\t\t\t\tthis.maxDelay = delay;\n\t\t\t\t\tthis.maxDelayTile = elem;\n\t\t\t\t}\n\t\t\t},\n\t\t\texecute: function() {\n\t\t\t\tthis.slider.image1.css3({\n\t\t\t\t\t'perspective': this.options.perspective,\n\t\t\t\t\t'perspective-origin': '50% 50%'\n\t\t\t\t}).css({\n\t\t\t\t\t'-moz-transform': 'perspective('+this.options.perspective+'px)',\n\t\t\t\t\t'-moz-perspective': 'none',\n\t\t\t\t\t'-moz-transform-style': 'preserve-3d'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tvar _this = this;\n\t\n\t\t\t\tvar blocks = this.slider.image1.find('div.tile');\n\t\n\t\t\t\t// Get notified when the last transition has completed\n\t\t\t\tthis.maxDelayTile.transitionEnd(function(){\n\t\t\t\t\t_this.slider.image1.css3({\n\t\t\t\t\t\t'transform-style': 'flat'\n\t\t\t\t\t});\n\t\t\t\t\t_this.finished();\n\t\t\t\t});\n\t\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tblocks.each(function(index, block){\t\t\t\t\n\t\t\t\t\t\t$(block).css({\n\t\t\t\t\t\t\t'opacity': '0'\n\t\t\t\t\t\t}).css3({\n\t\t\t\t\t\t\t'transform': flux.browser.translate(0, 0, 700) + \" rotate3d(\"+(Math.round(Math.random()*2)-1)+\", \"+(Math.round(Math.random()*2)-1)+\", \"+(Math.round(Math.random()*2)-1)+\", 90deg) \"\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t}, opts));\n\t};\n});"]}