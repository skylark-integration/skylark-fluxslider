{"version":3,"sources":["flux.browser.js"],"names":["define","$","flux","browser","init","undefined","supportsTransitions","document","createElement","window","Modernizr","csstransitions","this","supportsCSSProperty","csstransforms3d","supports3d","get","style","div3D","mq","join","append","offsetLeft","remove","prop","div","domPrefixes","support","i","length","translate","x","y","z","rotateX","deg","rotate","rotateY","rotateZ","axis"],"mappings":";;;;;;;AAAAA,QACC,iBACA,UACC,SAASC,EAAEC,GACZA,EAAKC,SACJC,KAAM,WAEL,QAAwCC,IAArCH,EAAKC,QAAQG,oBAAhB,CAGUC,SAASC,cAAc,OAajC,GARGC,OAAOC,gBAA0CL,IAA7BK,UAAUC,eAChCT,EAAKC,QAAQG,oBAAsBI,UAAUC,eAG7CT,EAAKC,QAAQG,oBAAsBM,KAAKC,oBAAoB,cAI1DJ,OAAOC,gBAA2CL,IAA9BK,UAAUI,gBAChCZ,EAAKC,QAAQY,WAAaL,UAAUI,qBAMpC,GAFAZ,EAAKC,QAAQY,WAAaH,KAAKC,oBAAoB,eAE9CX,EAAKC,QAAQY,YAAc,sBAAuBd,EAAE,QAAQe,IAAI,GAAGC,MAAQ,CAE/E,IAAIC,EAAQjB,EAAE,mCACVkB,EAAKlB,EAAE,mCAtBA,UAAW,OAAQ,KAAM,OAsBkBmB,KAAK,oBAAoB,gFAE/EnB,EAAE,QAAQoB,OAAOH,GACjBjB,EAAE,QAAQoB,OAAOF,GAEjBjB,EAAKC,QAAQY,WAAwC,GAA3BG,EAAMF,IAAI,GAAGM,WAEvCJ,EAAMK,SACNJ,EAAGI,YAKNV,oBAAqB,SAASW,GAM7B,IALA,IAAIC,EAAMlB,SAASC,cAAc,OAEhCkB,GAAe,SAAU,MAAO,IAAK,MAElCC,GAAU,EACNC,EAAE,EAAGA,EAAEF,EAAYG,OAAQD,IAE/BF,EAAYE,GAAGJ,KAAQC,EAAIR,QAC7BU,EAAUA,IAAW,GAGvB,OAAOA,GAERG,UAAW,SAASC,EAAGC,EAAGC,GAKzB,OAJAF,OAAU1B,GAAL0B,EAAkBA,EAAI,EAC3BC,OAAU3B,GAAL2B,EAAkBA,EAAI,EAC3BC,OAAU5B,GAAL4B,EAAkBA,EAAI,EAEpB,aAAe/B,EAAKC,QAAQY,WAAa,MAAQ,KAAOgB,EAAI,MAAQC,GAAK9B,EAAKC,QAAQY,WAAa,MAAQkB,EAAI,MAAQ,QAG/HC,QAAS,SAASC,GACjB,OAAOjC,EAAKC,QAAQiC,OAAO,IAAKD,IAGjCE,QAAS,SAASF,GACjB,OAAOjC,EAAKC,QAAQiC,OAAO,IAAKD,IAGjCG,QAAS,SAASH,GACjB,OAAOjC,EAAKC,QAAQiC,OAAO,IAAKD,IAGjCC,OAAQ,SAASG,EAAMJ,GAMtB,OALII,KAASR,EAAI,GAAIC,EAAI,GAAIC,EAAI,MAChCM,EAAO,KAERJ,OAAc9B,GAAP8B,EAAoBA,EAAM,EAE9BjC,EAAKC,QAAQY,WACR,aAAqB,KAARwB,EAAc,IAAM,KAAK,MAAc,KAARA,EAAc,IAAM,KAAK,MAAc,KAARA,EAAc,IAAM,KAAK,KAAKJ,EAAI,OAGzG,KAARI,EACK,UAAUJ,EAAI,OAEd,KAKXlC,EAAE,WAEDC,EAAKC,QAAQC","file":"../flux.browser.js","sourcesContent":["define([\n\t\"skylark-jquery\",\n\t\"./flux\"\n],function($,flux) {\n\tflux.browser = {\n\t\tinit: function() {\n\t\t\t// Have we already been initialised?\n\t\t\tif(flux.browser.supportsTransitions !== undefined)\n\t\t\t\treturn;\n\n\t\t\tvar div = document.createElement('div'),\n\t\t\t\tprefixes = ['-webkit', '-moz', '-o', '-ms'],\n\t\t\t\tdomPrefixes = ['Webkit', 'Moz', 'O', 'Ms'];\n\n\t\t\t// Does the current browser support CSS Transitions?\n\t\t\tif(window.Modernizr && Modernizr.csstransitions !== undefined)\n\t\t\t\tflux.browser.supportsTransitions = Modernizr.csstransitions;\n\t\t\telse\n\t\t\t{\n\t\t\t\tflux.browser.supportsTransitions = this.supportsCSSProperty('Transition');\n\t\t\t}\n\n\t\t\t// Does the current browser support 3D CSS Transforms?\n\t\t\tif(window.Modernizr && Modernizr.csstransforms3d !== undefined)\n\t\t\t\tflux.browser.supports3d = Modernizr.csstransforms3d;\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Custom detection when Modernizr isn't available\n\t\t\t\tflux.browser.supports3d = this.supportsCSSProperty(\"Perspective\");\n\t\t\t\t\n\t\t\t\tif ( flux.browser.supports3d && 'webkitPerspective' in $('body').get(0).style ) {\n\t\t\t\t\t// Double check with a media query (similar to how Modernizr does this)\n\t\t\t\t\tvar div3D = $('<div id=\"csstransform3d\"></div>');\n\t\t\t\t\tvar mq = $('<style media=\"(transform-3d), ('+prefixes.join('-transform-3d),(')+'-transform-3d)\">div#csstransform3d { position: absolute; left: 9px }</style>');\n\n\t\t\t\t\t$('body').append(div3D);\n\t\t\t\t\t$('head').append(mq);\n\n\t\t\t\t\tflux.browser.supports3d = div3D.get(0).offsetLeft == 9;\n\n\t\t\t\t\tdiv3D.remove();\n\t\t\t\t\tmq.remove();\t\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\t\tsupportsCSSProperty: function(prop) {\n\t\t\tvar div = document.createElement('div'),\n\t\t\t\tprefixes = ['-webkit', '-moz', '-o', '-ms'],\n\t\t\t\tdomPrefixes = ['Webkit', 'Moz', 'O', 'Ms'];\n\t\t\t\t\n\t\t\tvar support = false;\n\t\t\tfor(var i=0; i<domPrefixes.length; i++)\n\t\t\t{\n\t\t\t\tif(domPrefixes[i]+prop in div.style)\n\t\t\t\t\tsupport = support || true;\n\t\t\t}\n\t\t\t\n\t\t\treturn support;\n\t\t},\n\t\ttranslate: function(x, y, z) {\n\t\t\tx = (x != undefined) ? x : 0;\n\t\t\ty = (y != undefined) ? y : 0;\n\t\t\tz = (z != undefined) ? z : 0;\n\n\t\t\treturn 'translate' + (flux.browser.supports3d ? '3d(' : '(') + x + 'px,' + y + (flux.browser.supports3d ? 'px,' + z + 'px)' : 'px)');\n\t\t},\n\n\t\trotateX: function(deg) {\n\t\t\treturn flux.browser.rotate('x', deg);\n\t\t},\n\n\t\trotateY: function(deg) {\n\t\t\treturn flux.browser.rotate('y', deg);\n\t\t},\n\n\t\trotateZ: function(deg) {\n\t\t\treturn flux.browser.rotate('z', deg);\n\t\t},\n\n\t\trotate: function(axis, deg) {\n\t\t\tif(!axis in {'x':'', 'y':'', 'z':''})\n\t\t\t\taxis = 'z';\n\n\t\t\tdeg = (deg != undefined) ? deg : 0;\n\n\t\t\tif(flux.browser.supports3d)\n\t\t\t\treturn 'rotate3d('+(axis == 'x' ? '1' : '0')+', '+(axis == 'y' ? '1' : '0')+', '+(axis == 'z' ? '1' : '0')+', '+deg+'deg)';\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(axis == 'z')\n\t\t\t\t\treturn 'rotate('+deg+'deg)';\n\t\t\t\telse\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\t};\n\n\t$(function(){\n\t\t// To continue to work with legacy code, ensure that flux.browser is initialised on document ready at the latest\n\t\tflux.browser.init();\n\t});\n});"]}