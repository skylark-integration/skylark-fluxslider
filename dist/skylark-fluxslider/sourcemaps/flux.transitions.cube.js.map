{"version":3,"sources":["flux.transitions.cube.js"],"names":["define","$","flux","transitions","cube","fluxslider","opts","transition","extend","requires3d","barWidth","direction","perspective","setup","width","this","slider","image1","height","css3","options","perspective-origin","cubeContainer","css","position","transition-duration","transition-timing-function","transition-property","transform-style","top","left","currentFace","background","backface-visibility","append","nextFace","image2","transform","transitionStrings","call","execute","_this","hide","transitionEnd","show","finished","setTimeout","elem","t","up","browser","rotateX","translate","container","down","rotateY","right"],"mappings":"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","file":"../flux.transitions.cube.js","sourcesContent":["define([\n\t\"skylark-jquery\",\n\t\"./flux\",\n\t\"./flux.transitions\"\n],function($,flux) {\n\tflux.transitions.cube = function(fluxslider, opts) {\n\t\treturn new flux.transition(fluxslider, $.extend({\n\t\t\trequires3d: true,\n\t\t\tbarWidth: 100,\n\t\t\tdirection: 'left',\n\t\t\tperspective: 1000,\n\t\t\tsetup: function() {\n\t\t\t\tvar width = this.slider.image1.width();\n\t\t\t\tvar height = this.slider.image1.height();\n\n\t\t\t\t// Setup the container to allow 3D perspective\n\n\t\t\t\tthis.slider.image1.css3({\n\t\t\t\t\t'perspective': this.options.perspective,\n\t\t\t\t\t'perspective-origin': '50% 50%'\n\t\t\t\t});\n\n\t\t\t\tthis.cubeContainer = $('<div class=\"cube\"></div>').css({\n\t\t\t\t\twidth: width+'px',\n\t\t\t\t\theight: height+'px',\n\t\t\t\t\tposition: 'relative'\n\t\t\t\t}).css3({\n\t\t\t\t\t'transition-duration': '800ms',\n\t\t\t\t\t'transition-timing-function': 'linear',\n\t\t\t\t\t'transition-property': 'all',\n\t\t\t\t\t'transform-style': 'preserve-3d'\n\t\t\t\t});\n\n\t\t\t\tvar css = {\n\t\t\t\t\theight: '100%',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: '0px',\n\t\t\t\t\tleft: '0px'\n\t\t\t\t};\n\n\t\t\t\tvar currentFace = $('<div class=\"face current\"></div>').css($.extend(css, {\n\t\t\t\t\tbackground: this.slider.image1.css('background-image')\n\t\t\t\t})).css3({\n\t\t\t\t\t'backface-visibility': 'hidden'\n\t\t\t\t});\n\n\t\t\t\tthis.cubeContainer.append(currentFace);\n\n\t\t\t\tvar nextFace = $('<div class=\"face next\"></div>').css($.extend(css, {\n\t\t\t\t\tbackground: this.slider.image2.css('background-image')\n\t\t\t\t})).css3({\n\t\t\t\t\t'transform' : this.options.transitionStrings.call(this, this.options.direction, 'nextFace'),\n\t\t\t\t\t'backface-visibility': 'hidden'\n\t\t\t\t});\n\n\t\t\t\tthis.cubeContainer.append(nextFace);\n\n\t\t\t\tthis.slider.image1.append(this.cubeContainer);\n\t\t\t},\n\t\t\texecute: function() {\n\t\t\t\tvar _this = this;\n\n\t\t\t\tvar width = this.slider.image1.width();\n\t\t\t\tvar height = this.slider.image1.height();\n\n\t\t\t\tthis.slider.image2.hide();\n\t\t\t\tthis.cubeContainer.transitionEnd(function(){\n\t\t\t\t\t_this.slider.image2.show();\n\n\t\t\t\t\t_this.finished();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t_this.cubeContainer.css3({\n\t\t\t\t\t\t'transform' : _this.options.transitionStrings.call(_this, _this.options.direction, 'container')\n\t\t\t\t\t});\n\t\t\t\t}, 50);\n\t\t\t},\n\t\t\ttransitionStrings: function(direction, elem) {\n\t\t\t\tvar width = this.slider.image1.width();\n\t\t\t\tvar height = this.slider.image1.height();\n\n\t\t\t\t// Define the various transforms that are required to perform various cube rotations\n\t\t\t\tvar t = {\n\t\t\t\t\t'up' : {\n\t\t\t\t\t\t'nextFace': flux.browser.rotateX(-90) + ' ' + flux.browser.translate(0, height/2, height/2),\n\t\t\t\t\t\t'container': flux.browser.rotateX(90) + ' ' + flux.browser.translate(0, -height/2, height/2)\n\t\t\t\t\t},\n\t\t\t\t\t'down' : {\n\t\t\t\t\t\t'nextFace': flux.browser.rotateX(90) + ' ' + flux.browser.translate(0, -height/2, height/2),\n\t\t\t\t\t\t'container': flux.browser.rotateX(-90) + ' ' + flux.browser.translate(0, height/2, height/2)\n\t\t\t\t\t},\n\t\t\t\t\t'left' : {\n\t\t\t\t\t\t'nextFace': flux.browser.rotateY(90) + ' ' + flux.browser.translate(width/2, 0, width/2),\n\t\t\t\t\t\t'container': flux.browser.rotateY(-90) + ' ' + flux.browser.translate(-width/2, 0, width/2)\n\t\t\t\t\t},\n\t\t\t\t\t'right' : {\n\t\t\t\t\t\t'nextFace': flux.browser.rotateY(-90) + ' ' + flux.browser.translate(-width/2, 0, width/2),\n\t\t\t\t\t\t'container': flux.browser.rotateY(90) + ' ' + flux.browser.translate(width/2, 0, width/2)\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\treturn (t[direction] && t[direction][elem]) ? t[direction][elem] : false;\n\t\t\t}\n\t\t}, opts));\t\n\t};\n});"]}