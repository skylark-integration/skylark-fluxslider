{"version":3,"sources":["flux.transitions.tiles3d.js"],"names":["define","$","flux","transitions","tiles3d","fluxslider","opts","transition_grid","extend","requires3d","forceSquare","columns","perspective","delayBetweenBarsX","delayBetweenBarsY","renderTile","elem","colIndex","rowIndex","colWidth","rowHeight","leftOffset","topOffset","tile","css","width","height","position","top","left","background-image","this","slider","image1","background-position","background-repeat","-moz-transform","css3","backface-visibility","tile2","get","cloneNode","image2","transform","browser","rotateY","z-index","options","rows","transition-duration","transition-timing-function","transition-property","transition-delay","transform-style","append","execute","perspective-origin","_this","tiles","find","hide","last","transitionEnd","event","show","finished","setTimeout"],"mappings":";;;;;;;AAAAA,QACC,iBACA,SACA,sBACC,SAASC,EAAEC,GACZA,EAAKC,YAAYC,QAAU,SAASC,EAAYC,GAC/C,OAAO,IAAIJ,EAAKK,gBAAgBF,EAAYJ,EAAEO,QAC7CC,YAAY,EACZC,aAAa,EACbC,QAAS,EACTC,YAAa,IACbC,kBAAmB,IACnBC,kBAAmB,IACnBC,WAAY,SAASC,EAAMC,EAAUC,EAAUC,EAAUC,EAAWC,EAAYC,GAC/E,IAAIC,EAAOtB,EAAE,eAAeuB,KAC3BC,MAAON,EAAS,KAChBO,OAAQN,EAAU,KAClBO,SAAU,WACVC,IAAK,MACLC,KAAM,MAGNC,mBAAoBC,KAAKC,OAAOC,OAAOT,IAAI,oBAC3CU,sBAAuB,IAAIb,EAAW,OAAOC,EAAU,KACvDa,oBAAqB,YACrBC,iBAAkB,oBAChBC,MACFC,sBAAuB,WAGpBC,EAAQtC,EAAEsB,EAAKiB,IAAI,GAAGC,WAAU,IAAQjB,KAC3CM,mBAAoBC,KAAKC,OAAOU,OAAOlB,IAAI,sBAEzCa,MACFM,UAAazC,EAAK0C,QAAQC,QAAQ,KAClCP,sBAAuB,WAGxBrC,EAAEe,GAAMQ,KACPsB,WAAY7B,EAAWc,KAAKgB,QAAQpC,QAAQ,EAAI,IAAIM,EAAW,MAAQC,EAAWa,KAAKgB,QAAQC,KAAK,EAAI,IAAI9B,EAAW,OACrHmB,MACFY,sBAAuB,QACvBC,6BAA8B,WAC9BC,sBAAuB,MACvBC,mBAAqBnC,EAASc,KAAKgB,QAAQlC,kBAAkBK,EAASa,KAAKgB,QAAQjC,kBAAmB,KACtGuC,kBAAmB,gBACjBC,OAAO/B,GAAM+B,OAAOf,IAExBgB,QAAS,WACRxB,KAAKC,OAAOC,OAAOI,MAClBzB,YAAemB,KAAKgB,QAAQnC,YAC5B4C,qBAAsB,YAGvB,IAAIC,EAAQ1B,KAER2B,EAAQ3B,KAAKC,OAAOC,OAAO0B,KAAK,YAEpC5B,KAAKC,OAAOU,OAAOkB,OAGnBF,EAAMG,OAAOC,cAAc,SAASC,GACnCN,EAAMzB,OAAOU,OAAOsB,OAEpBP,EAAMQ,aAGPC,WAAW,WACVR,EAAMrB,MACLM,UAAazC,EAAK0C,QAAQC,QAAQ,QAEjC,MAEFvC","file":"../flux.transitions.tiles3d.js","sourcesContent":["define([\n\t\"skylark-jquery\",\n\t\"./flux\",\n\t\"./flux.transitions\"\n],function($,flux) {\n\tflux.transitions.tiles3d = function(fluxslider, opts) {\n\t\treturn new flux.transition_grid(fluxslider, $.extend({\n\t\t\trequires3d: true,\n\t\t\tforceSquare: true,\n\t\t\tcolumns: 5,\n\t\t\tperspective: 600,\n\t\t\tdelayBetweenBarsX: 200,\n\t\t\tdelayBetweenBarsY: 150,\n\t\t\trenderTile: function(elem, colIndex, rowIndex, colWidth, rowHeight, leftOffset, topOffset) {\n\t\t\t\tvar tile = $('<div></div>').css({\n\t\t\t\t\twidth: colWidth+'px',\n\t\t\t\t\theight: rowHeight+'px',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: '0px',\n\t\t\t\t\tleft: '0px',\n\t\t\t\t\t//'z-index': 200, // Removed to make compatible with FF10 (Chrome bug seems to have been fixed)\n\n\t\t\t\t\t'background-image': this.slider.image1.css('background-image'),\n\t\t\t\t\t'background-position': '-'+leftOffset+'px -'+topOffset+'px',\n\t\t\t\t\t'background-repeat': 'no-repeat',\n\t\t\t\t\t'-moz-transform': 'translateZ(1px)'\n\t\t\t\t}).css3({\n\t\t\t\t\t'backface-visibility': 'hidden'\n\t\t\t\t});\n\n\t\t\t\tvar tile2 = $(tile.get(0).cloneNode(false)).css({\n\t\t\t\t\t'background-image': this.slider.image2.css('background-image')\n\t\t\t\t\t//'z-index': 190 // Removed to make compatible with FF10 (Chrome bug seems to have been fixed)\n\t\t\t\t}).css3({\n\t\t\t\t\t'transform': flux.browser.rotateY(180),\n\t\t\t\t\t'backface-visibility': 'hidden'\n\t\t\t\t});\n\n\t\t\t\t$(elem).css({\n\t\t\t\t\t'z-index': (colIndex > this.options.columns/2 ? 500-colIndex : 500) + (rowIndex > this.options.rows/2 ? 500-rowIndex : 500) // Fix for Chrome to ensure that the z-index layering is correct!\n\t\t\t\t}).css3({\n\t\t\t\t\t'transition-duration': '800ms',\n\t\t\t\t\t'transition-timing-function': 'ease-out',\n\t\t\t\t\t'transition-property': 'all',\n\t\t\t\t\t'transition-delay': (colIndex*this.options.delayBetweenBarsX+rowIndex*this.options.delayBetweenBarsY)+'ms',\n\t\t\t\t\t'transform-style': 'preserve-3d'\n\t\t\t\t}).append(tile).append(tile2);\n\t\t\t},\n\t\t\texecute: function() {\n\t\t\t\tthis.slider.image1.css3({\n\t\t\t\t\t'perspective': this.options.perspective,\n\t\t\t\t\t'perspective-origin': '50% 50%'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tvar _this = this;\n\n\t\t\t\tvar tiles = this.slider.image1.find('div.tile');\n\n\t\t\t\tthis.slider.image2.hide();\n\n\t\t\t\t// Get notified when the last transition has completed\n\t\t\t\ttiles.last().transitionEnd(function(event){\n\t\t\t\t\t_this.slider.image2.show();\n\n\t\t\t\t\t_this.finished();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\ttiles.css3({\n\t\t\t\t\t\t'transform': flux.browser.rotateY(180)\n\t\t\t\t\t});\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t}, opts));\n\t};\n});"]}