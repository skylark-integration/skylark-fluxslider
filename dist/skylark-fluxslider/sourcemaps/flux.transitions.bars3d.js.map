{"version":3,"sources":["flux.transitions.bars3d.js"],"names":["define","$","flux","transitions","bars3d","fluxslider","opts","transition_grid","extend","requires3d","columns","rows","delayBetweenBars","perspective","renderTile","elem","colIndex","rowIndex","colWidth","rowHeight","leftOffset","topOffset","bar","css","width","height","position","top","left","z-index","background-image","this","slider","image1","background-position","background-repeat","css3","backface-visibility","bar2","get","cloneNode","image2","transform","browser","rotateX","translate","background","rotateY","right","options","transition-duration","transition-timing-function","transition-property","transition-delay","transform-style","append","execute","perspective-origin","-moz-transform","-moz-perspective","-moz-transform-style","_this","bars","find","hide","last","transitionEnd","event","show","finished","setTimeout"],"mappings":";;;;;;;AAAAA,QACC,iBACA,SACA,sBACC,SAASC,EAAEC,GACZA,EAAKC,YAAYC,OAAS,SAASC,EAAYC,GAC9C,OAAO,IAAIJ,EAAKK,gBAAgBF,EAAYJ,EAAEO,QAC7CC,YAAY,EACZC,QAAS,EACTC,KAAM,EACNC,iBAAkB,IAClBC,YAAa,IACbC,WAAY,SAASC,EAAMC,EAAUC,EAAUC,EAAUC,EAAWC,EAAYC,GAC/E,IAAIC,EAAMrB,EAAE,mBAAmBe,EAAS,YAAYO,KACnDC,MAAON,EAAS,KAChBO,OAAQ,OACRC,SAAU,WACVC,IAAK,MACLC,KAAM,MACNC,UAAW,IAEXC,mBAAoBC,KAAKC,OAAOC,OAAOV,IAAI,oBAC3CW,sBAAuB,IAAId,EAAW,SACtCe,oBAAqB,cACnBC,MACFC,sBAAuB,WAGxBC,EAAOrC,EAAEqB,EAAIiB,IAAI,GAAGC,WAAU,IAAQjB,KACrCO,mBAAoBC,KAAKC,OAAOS,OAAOlB,IAAI,sBACzCa,MACFM,UAAaxC,EAAKyC,QAAQC,QAAQ,IAAM,IAAM1C,EAAKyC,QAAQE,UAAU,GAAI1B,EAAU,EAAGA,EAAU,KAGjGS,EAAO3B,EAAE,wBAAwBe,EAAS,YAAYO,KACrDC,MAAOL,EAAU,KACjBM,OAAQN,EAAU,KAClBO,SAAU,WACVC,IAAK,MACLC,KAAM,MACNkB,WAAY,OACZjB,UAAW,MACTO,MACFM,UAAaxC,EAAKyC,QAAQI,QAAQ,IAAM,IAAM7C,EAAKyC,QAAQE,UAAU1B,EAAU,EAAG,GAAIA,EAAU,GAAK,IAAMjB,EAAKyC,QAAQI,QAAQ,KAChIV,sBAAuB,WAGxBW,EAAQ/C,EAAE2B,EAAKW,IAAI,GAAGC,WAAU,IAAQJ,MACvCM,UAAaxC,EAAKyC,QAAQI,QAAQ,IAAM,IAAM7C,EAAKyC,QAAQE,UAAU1B,EAAU,EAAG,EAAGD,EAASC,EAAU,KAGzGlB,EAAEc,GAAMQ,KACPC,MAAON,EAAS,KAChBO,OAAQ,OACRC,SAAU,WACVC,IAAK,MACLC,KAAMR,EAAW,KACjBS,UAAWb,EAAWe,KAAKkB,QAAQvC,QAAQ,EAAI,IAAKM,EAAW,MAC7DoB,MACFc,sBAAuB,QACvBC,6BAA8B,SAC9BC,sBAAuB,MACvBC,mBAAqBrC,EAASe,KAAKkB,QAAQrC,iBAAkB,KAC7D0C,kBAAmB,gBACjBC,OAAOjC,GAAKiC,OAAOjB,GAAMiB,OAAO3B,GAAM2B,OAAOP,IAEjDQ,QAAS,WACRzB,KAAKC,OAAOC,OAAOG,MAClBvB,YAAekB,KAAKkB,QAAQpC,YAC5B4C,qBAAsB,YACpBlC,KACFmC,iBAAkB,eAAe3B,KAAKkB,QAAQpC,YAAY,MAC1D8C,mBAAoB,OACpBC,uBAAwB,gBAGzB,IAAIC,EAAQ9B,KACXN,EAASM,KAAKC,OAAOC,OAAOR,SAC5BqC,EAAO/B,KAAKC,OAAOC,OAAO8B,KAAK,YAEhChC,KAAKC,OAAOS,OAAOuB,OAGnBF,EAAKG,OAAOC,cAAc,SAASC,GAClCN,EAAM7B,OAAOC,OAAOG,MACnBkB,kBAAmB,SAGpBO,EAAM7B,OAAOS,OAAO2B,OAEpBP,EAAMQ,aAGPC,WAAW,WACVR,EAAK1B,MACJM,UAAaxC,EAAKyC,QAAQC,SAAS,IAAM,IAAM1C,EAAKyC,QAAQE,UAAU,EAAGpB,EAAO,EAAGA,EAAO,MAEzF,MAEFnB","file":"../flux.transitions.bars3d.js","sourcesContent":["define([\n\t\"skylark-jquery\",\n\t\"./flux\",\n\t\"./flux.transitions\"\n],function($,flux) {\n\tflux.transitions.bars3d = function(fluxslider, opts) {\n\t\treturn new flux.transition_grid(fluxslider, $.extend({\n\t\t\trequires3d: true,\n\t\t\tcolumns: 7,\n\t\t\trows: 1,\n\t\t\tdelayBetweenBars: 150,\n\t\t\tperspective: 1000,\n\t\t\trenderTile: function(elem, colIndex, rowIndex, colWidth, rowHeight, leftOffset, topOffset) {\n\t\t\t\tvar bar = $('<div class=\"bar-'+colIndex+'\"></div>').css({\n\t\t\t\t\twidth: colWidth+'px',\n\t\t\t\t\theight: '100%',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: '0px',\n\t\t\t\t\tleft: '0px',\n\t\t\t\t\t'z-index': 200,\n\n\t\t\t\t\t'background-image': this.slider.image1.css('background-image'),\n\t\t\t\t\t'background-position': '-'+leftOffset+'px 0px',\n\t\t\t\t\t'background-repeat': 'no-repeat'\n\t\t\t\t}).css3({\n\t\t\t\t\t'backface-visibility': 'hidden'\n\t\t\t\t}),\n\n\t\t\t\tbar2 = $(bar.get(0).cloneNode(false)).css({\n\t\t\t\t\t'background-image': this.slider.image2.css('background-image')\n\t\t\t\t}).css3({\n\t\t\t\t\t'transform': flux.browser.rotateX(90) + ' ' + flux.browser.translate(0, -rowHeight/2, rowHeight/2)\n\t\t\t\t}),\n\n\t\t\t\tleft = $('<div class=\"side bar-'+colIndex+'\"></div>').css({\n\t\t\t\t\twidth: rowHeight+'px',\n\t\t\t\t\theight: rowHeight+'px',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: '0px',\n\t\t\t\t\tleft: '0px',\n\t\t\t\t\tbackground: '#222',\n\t\t\t\t\t'z-index': 190\n\t\t\t\t}).css3({\n\t\t\t\t\t'transform': flux.browser.rotateY(90) + ' ' + flux.browser.translate(rowHeight/2, 0, -rowHeight/2) + ' ' + flux.browser.rotateY(180),\n\t\t\t\t\t'backface-visibility': 'hidden'\n\t\t\t\t}),\n\n\t\t\t\tright = $(left.get(0).cloneNode(false)).css3({\n\t\t\t\t\t'transform': flux.browser.rotateY(90) + ' ' + flux.browser.translate(rowHeight/2, 0, colWidth-rowHeight/2)\n\t\t\t\t});\n\n\t\t\t\t$(elem).css({\n\t\t\t\t\twidth: colWidth+'px',\n\t\t\t\t\theight: '100%',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: '0px',\n\t\t\t\t\tleft: leftOffset+'px',\n\t\t\t\t\t'z-index': colIndex > this.options.columns/2 ? 1000-colIndex : 1000 // Fix for Chrome to ensure that the z-index layering is correct!\n\t\t\t\t}).css3({\n\t\t\t\t\t'transition-duration': '800ms',\n\t\t\t\t\t'transition-timing-function': 'linear',\n\t\t\t\t\t'transition-property': 'all',\n\t\t\t\t\t'transition-delay': (colIndex*this.options.delayBetweenBars)+'ms',\n\t\t\t\t\t'transform-style': 'preserve-3d'\n\t\t\t\t}).append(bar).append(bar2).append(left).append(right);\n\t\t\t},\n\t\t\texecute: function() {\n\t\t\t\tthis.slider.image1.css3({\n\t\t\t\t\t'perspective': this.options.perspective,\n\t\t\t\t\t'perspective-origin': '50% 50%'\n\t\t\t\t}).css({\n\t\t\t\t\t'-moz-transform': 'perspective('+this.options.perspective+'px)',\n\t\t\t\t\t'-moz-perspective': 'none',\n\t\t\t\t\t'-moz-transform-style': 'preserve-3d'\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tvar _this = this,\n\t\t\t\t\theight = this.slider.image1.height(),\n\t\t\t\t\tbars = this.slider.image1.find('div.tile');\n\n\t\t\t\tthis.slider.image2.hide();\n\n\t\t\t\t// Get notified when the last transition has completed\n\t\t\t\tbars.last().transitionEnd(function(event){\n\t\t\t\t\t_this.slider.image1.css3({\n\t\t\t\t\t\t'transform-style': 'flat'\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t_this.slider.image2.show();\n\n\t\t\t\t\t_this.finished();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tbars.css3({\n\t\t\t\t\t\t'transform': flux.browser.rotateX(-90) + ' ' + flux.browser.translate(0, height/2, height/2)\n\t\t\t\t\t});\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t}, opts));\n\t};\n});"]}